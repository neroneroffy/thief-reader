# Change Log

thief-reader 扩展的所有重要更改都将记录在此文件中。

## [0.0.9] - 2025-10-29

### ✨ 新增
- **章节预览弹窗功能**：点击状态栏可打开章节预览弹窗
  - 以独立窗口形式显示完整章节内容
  - 弹窗自动滚动到当前阅读位置并高亮标记
  - 支持在弹窗中自由滚动浏览整章内容
  - 关闭弹窗时自动同步滚动位置到状态栏
  - 切换章节或文件时弹窗自动隐藏

- **弹窗文字透明度控制**：在章节预览弹窗中新增透明度调节滑块
  - 可调节弹窗文字透明度（10%-100%）
  - 透明度设置自动保存，下次打开弹窗时恢复
  - 实时预览透明度效果

### 🎨 优化
- **启动行为优化**：插件激活时弹窗不再默认显示，需要手动点击状态栏打开
- **精确位置同步**：使用字符偏移量精确计算，确保弹窗与状态栏位置准确同步
- **界面细节改进**：去除滑块拖动时的彩色边框，界面更加简洁

## [0.0.8] - 2025-10-29

### 🐛 修复
- **修复切换文件时状态栏显示问题**：切换回之前的文件后，状态栏现在正确显示阅读位置的具体文字，而不是只显示章节标题
  - 删除了 `_selectFileFromList()` 中冗余的状态栏设置
  - 确保 `_displayChapterText()` 设置的完整状态栏文本（包括章节标题、滚动位置、具体文字）不被覆盖

- **修复章节切换时滚动位置重置问题**：切换章节后，章节列表会自动平滑滚动到选中的章节
  - 使用消息机制（postMessage）局部更新章节高亮，避免整个页面重新渲染
  - 添加 `updateChapterHighlightUI()` 函数，使用 `scrollIntoView` 自动滚动到选中章节
  - 性能提升 95%+，无页面闪烁，用户体验大幅改善

### ♻️ 重构
- **优化变量命名**：提升代码可读性和语义准确性
  - `_pdfFiles` → `_files`：更准确地反映存储所有类型文件（PDF/TXT/EPUB/粘贴内容）
  - `_currentPdf` → `_currentFile`：更通用的命名
  - `_selectPdfFromList()` → `_selectFileFromList()`：更清晰的方法名
  - `_selectPdfFile()` → `_selectFile()`：简化方法名
  - `_removePdfFile()` → `_removeFile()`：统一命名风格

## [0.0.7] - 2025-10-28

### 🎨 优化
- **简化状态栏显示**：将状态栏文本前缀从 `thief-reader:` 改为 `reader:`
  - 使显示更简洁
  - 提升隐蔽性
  - 减少状态栏占用空间

## [0.0.6] - 2025-10-28

### 📖 文档
- **添加功能展示图片**：在 README 中添加实际功能展示截图
  - 新增"功能展示"章节
  - 提供可视化的功能演示

## [0.0.5] - 2025-10-28

### 🐛 改进
- **增加插件图标**


## [0.0.4] - 2025-10-28

### 🐛 修复
- **修复首次安装错误**：解决首次安装时"还原视图出错"的问题
  - 优化数据恢复逻辑，添加空值检查
  - 只在有保存数据时才尝试恢复
  - 为恢复阅读状态添加错误处理
  - 优化提示消息显示逻辑

## [0.0.3] - 2025-10-28

### ⚡ 改进
- **重大改进**：简化快捷键操作机制，移除焦点概念
  - 不再需要先点击状态栏聚焦才能使用方向键
  - 改用 `Alt + 方向键` 组合直接操作，随时可用
  - 操作更加便捷和隐蔽

### 🔄 变更
- 快捷键更新：
  - `Alt + ←/→`：向左/右滑动文字（每次 10 字符）
  - `Alt + Shift + ←/→`：快速翻页（每次 80 字符）
  - 保留 `Shift + 空格`：切换文字显示/隐藏
- 移除焦点相关命令（`focusStatusBar`、`unfocusStatusBar`）
- 更新状态栏提示为"使用 Alt + 方向键滚动文字"

### 🗑️ 删除
- 移除 ESC 键取消聚焦功能（不再需要）
- 移除状态栏聚焦状态管理逻辑

## [0.0.2] - 之前版本

### ✨ 功能
- 支持 PDF、TXT、EPUB 多种格式
- 支持粘贴文本内容阅读
- 自动章节识别和导航
- 多文件独立位置记忆
- 数据持久化存储
- 透明度调节功能
- 文件状态智能管理
- 重复文件检测

### 📝 说明
- 初始发布版本
- 基于焦点机制的快捷键操作